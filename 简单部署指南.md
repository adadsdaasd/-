# Digital Twin 简单部署指南

## 🎯 快速开始（3步完成部署）

### 步骤 1：启动应用

在项目目录下打开命令行，运行：

```bash
streamlit run app.py
```

### 步骤 2：查看访问链接

启动成功后，命令行会显示：

```
You can now view your Streamlit app in your browser.

  Local URL: http://localhost:8501
  Network URL: http://192.168.1.100:8501
```

### 步骤 3：打开浏览器访问

**方式一：自动打开**
- Streamlit 会自动在默认浏览器中打开应用

**方式二：手动打开**
- 复制 `Local URL` 中的地址（如：`http://localhost:8501`）
- 粘贴到浏览器地址栏，回车

---

## 📍 访问链接说明

### Local URL（本地访问）
- **地址格式**：`http://localhost:8501`
- **用途**：在本机浏览器中访问
- **说明**：只有本机可以访问，最常用

### Network URL（网络访问）
- **地址格式**：`http://192.168.1.100:8501`（IP 地址可能不同）
- **用途**：同一局域网内的其他设备可以访问
- **说明**：
  - 手机、平板、其他电脑可以通过这个地址访问
  - 需要确保设备在同一 Wi-Fi/局域网
  - 如果无法访问，检查防火墙设置

---

## 🔧 多用户部署（共享数据）

### 场景：团队使用，数据共享

**管理员操作（只需一次）**：

1. **创建共享文件夹**
   ```
   例如：C:\TeamData\DigitalTwin
   或：\\server\shared\digital_twin
   ```

2. **运行设置工具**
   ```bash
   python deploy_setup.py --admin
   ```
   输入共享文件夹路径

**每个用户操作**：

1. **方式一：使用配置文件（推荐）**
   ```bash
   python deploy_setup.py --user --config C:\TeamData\DigitalTwin\deployment_config.json
   ```

2. **方式二：使用启动脚本**
   - 编辑 `start_app.bat`
   - 修改 `DIGITAL_TWIN_SHARED_DIR` 为共享路径
   - 双击运行

3. **启动应用**
   ```bash
   streamlit run app.py
   ```

4. **访问链接**
   - 浏览器会自动打开 `http://localhost:8501`
   - 或手动输入显示的 Local URL

---

## ✅ 验证部署

运行验证脚本：

```bash
python verify_deployment.py
```

会显示：
- 共享数据路径配置
- 本地配置路径
- 依赖检查
- **访问链接信息**

---

## 🎓 完整示例

### 示例：3人团队部署

**管理员（张三）**：

```bash
# 1. 创建共享文件夹（手动创建或使用工具）
C:\TeamData\DigitalTwin

# 2. 运行管理员设置
python deploy_setup.py --admin
# 输入：C:\TeamData\DigitalTwin

# 3. 启动应用
streamlit run app.py

# 4. 浏览器自动打开：http://localhost:8501
```

**用户A（李四）**：

```bash
# 1. 用户设置
python deploy_setup.py --user --config C:\TeamData\DigitalTwin\deployment_config.json

# 2. 启动应用
streamlit run app.py

# 3. 浏览器自动打开：http://localhost:8501

# 4. 在应用中绑定身份：搜索"李四"并绑定
```

**用户B（王五）**：

```bash
# 1. 用户设置
python deploy_setup.py --user --config C:\TeamData\DigitalTwin\deployment_config.json

# 2. 启动应用
streamlit run app.py

# 3. 浏览器自动打开：http://localhost:8501

# 4. 在应用中绑定身份：搜索"王五"并绑定
```

**结果**：
- ✅ 三人看到相同的团队数据（多人版）
- ✅ 每人独立管理自己的个人信息（个人版）
- ✅ 数据自动同步到共享位置

---

## 🚨 常见问题

### Q: 启动后没有自动打开浏览器？

**A:** 手动复制 Local URL 到浏览器即可：
```
http://localhost:8501
```

### Q: 端口被占用？

**A:** 使用其他端口：
```bash
streamlit run app.py --server.port 8502
```
访问：`http://localhost:8502`

### Q: 其他设备无法访问 Network URL？

**A:** 
1. 确保在同一局域网
2. 检查防火墙是否允许 8501 端口
3. Windows：控制面板 → Windows Defender 防火墙 → 允许应用通过防火墙

### Q: 如何停止应用？

**A:** 在命令行窗口按 `Ctrl+C`

---

## 📝 快速参考

### 启动命令
```bash
streamlit run app.py
```

### 访问地址
- **本地**：`http://localhost:8501`
- **网络**：`http://<您的IP>:8501`（启动时显示）

### 部署工具
```bash
# 管理员设置
python deploy_setup.py --admin

# 用户设置
python deploy_setup.py --user --config <配置文件路径>
```

---

## 🎉 完成！

现在您可以：
1. ✅ 在浏览器中访问应用（`http://localhost:8501`）
2. ✅ 使用个人版管理自己的数字档案
3. ✅ 使用多人版查看和管理团队数据

**详细文档**：
- `部署教程.md` - 完整部署教程
- `DEPLOYMENT_PLAN.md` - 架构设计文档
- `QUICK_DEPLOY.md` - 快速部署指南
